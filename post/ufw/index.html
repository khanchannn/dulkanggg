<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        Mastering Linux Firewalls UFW (Uncomplicated Firewall)
    </title>
    <link rel="icon" href="/dulkanggg/images/logo.png" type="image/png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/dulkanggg/css/style.css">
</head>

<body>
    <div class="container">
        <header>
            <a href="/dulkanggg/" class="logo">
                <img src="/dulkanggg/images/logo.png" alt="Logo"
                    style="height: 40px; vertical-align: middle; margin-right: 10px;">
                Dulkanggg's Corner
            </a>
            <nav>
                <a href="/dulkanggg/">Home</a>
                <a href="/dulkanggg/search.html">Search</a>
                <a href="/dulkanggg/about">About</a>
                <a href="/dulkanggg/rss">RSS</a>
            </nav>
        </header>

    <article class="post-content">
        <h1 style="color: #e2b714;">
            Mastering Linux Firewalls UFW (Uncomplicated Firewall)
        </h1>
        <div style="color: var(--accent-color); margin-bottom: 20px;">
            <span>
                2025-12-02
            </span>
            
                | Tags:
                
                    <a href="/dulkanggg/tags/ubuntu"
                        style="color: var(--accent-color); text-decoration: underline;">
                        ubuntu
                    </a>
                    
                    <a href="/dulkanggg/tags/vps"
                        style="color: var(--accent-color); text-decoration: underline;">
                        vps
                    </a>
                    
                    <a href="/dulkanggg/tags/bilingual"
                        style="color: var(--accent-color); text-decoration: underline;">
                        bilingual
                    </a>
                    
                    <a href="/dulkanggg/tags/cybersecurity"
                        style="color: var(--accent-color); text-decoration: underline;">
                        cybersecurity
                    </a>
                    
                    <a href="/dulkanggg/tags/firewall"
                        style="color: var(--accent-color); text-decoration: underline;">
                        firewall
                    </a>
                    
                    <a href="/dulkanggg/tags/ufw"
                        style="color: var(--accent-color); text-decoration: underline;">
                        ufw
                    </a>
                    
                    <a href="/dulkanggg/tags/iptables"
                        style="color: var(--accent-color); text-decoration: underline;">
                        iptables
                    </a>
                    
                        
        </div>

        <div>
            <blockquote>
<p><em>üáªüá≥ B·∫£n ti·∫øng Vi·ªát n·∫±m ·ªü ph√≠a d∆∞·ªõi b√†i vi·∫øt (Vietnamese version is available below).</em></p>
</blockquote>
<hr>
<h3>Mastering Linux Firewalls Made Easy with UFW (Uncomplicated Firewall)</h3>
<p>Hello everyone! If you&#39;ve ever had a headache looking at the messy rules of iptables to configure a firewall, then UFW is your savior.</p>
<p>True to its name, &quot;Uncomplicated Firewall&quot;, this tool was born to simplify server protection. It provides an extremely friendly command-line interface to manage the underlying iptables. Today, I will guide you through the essential operations to master UFW.</p>
<h3>1. Installation and Startup</h3>
<p>On distros like Ubuntu or Debian, installation takes just a few seconds:</p>
<pre><code class="language-bash">sudo apt install ufw
</code></pre>
<p>By default after installation, UFW will be Inactive to prevent locking you out of the server immediately. To check the status:</p>
<pre><code class="language-bash">sudo ufw status
</code></pre>
<p>If you want to support IPv6, open the configuration file and check this line:</p>
<pre><code class="language-bash">sudo nano /etc/default/ufw
# Ensure this line is set to yes
IPV6=yes
</code></pre>
<p>If you need to restart the firewall after changing the config:</p>
<pre><code class="language-bash">sudo ufw disable
sudo ufw enable
</code></pre>
<h3>2. Setting Default &quot;Rules of the Game&quot;</h3>
<p>The golden rule in security is: &quot;Deny all, allow only what is necessary&quot;. Before opening any ports, set the defaults to block all incoming connections and allow all outgoing connections.</p>
<pre><code class="language-bash"># Block all incoming traffic
sudo ufw default deny incoming

# Allow all outgoing traffic
sudo ufw default allow outgoing
</code></pre>
<p><strong>Quick Tip:</strong> To ensure UFW always starts with the system, check the <code>/etc/ufw/ufw.conf</code> file and set <code>ENABLED=yes</code>.</p>
<h3>3. Opening Ports (Allow)</h3>
<p><strong>Most Important: SSH</strong>
Never enable the firewall without opening the SSH port, otherwise, you will lock yourself out!</p>
<pre><code class="language-bash"># Method 1: By service name
sudo ufw allow ssh

# Method 2: By port number (default is 22)
sudo ufw allow 22/tcp
</code></pre>
<p><em>Note: If you changed your SSH port to a different number (e.g., 2222), use the command: <code>sudo ufw allow 2222/tcp</code>.</em></p>
<p><strong>Web Server (HTTP/HTTPS)</strong>
Allow web access:</p>
<pre><code class="language-bash">sudo ufw allow www
# Or
sudo ufw allow 80/tcp
</code></pre>
<p><strong>FTP Server</strong></p>
<pre><code class="language-bash">sudo ufw allow ftp
# Or
sudo ufw allow 21/tcp
</code></pre>
<p><strong>Opening a Port Range</strong>
If your application needs a wide range of ports (e.g., from 100 to 300):</p>
<pre><code class="language-bash">sudo ufw allow 100:300/tcp
sudo ufw allow 100:300/udp
</code></pre>
<h3>4. Advanced Configuration (Specific IP)</h3>
<p>This is a great way to enhance security. Instead of opening the door to the whole world, you only open it for a specific person.</p>
<p><strong>Allow a specific IP:</strong></p>
<pre><code class="language-bash">sudo ufw allow from 192.168.0.100
</code></pre>
<p><strong>Allow an entire Subnet:</strong></p>
<pre><code class="language-bash">sudo ufw allow from 123.45.67.89/24
</code></pre>
<p><strong>Combo: Allow this IP to this specific Port only:</strong>
Example: Only allow the Boss&#39;s machine (IP 123.45.67.89) to SSH into the server.</p>
<pre><code class="language-bash">sudo ufw allow from 123.45.67.89 to any port 22 proto tcp
</code></pre>
<h3>5. Managing and Deleting Rules</h3>
<p>Added a rule by mistake? No problem.</p>
<p><strong>Block connections (Deny)</strong>
Although we defaulted to deny all, if you need to specifically block a port that is currently open:</p>
<pre><code class="language-bash">sudo ufw deny 80/tcp
</code></pre>
<p><strong>Delete rules (Delete)</strong>
The simplest way is to add delete before the old command:</p>
<pre><code class="language-bash">sudo ufw delete allow 80/tcp
</code></pre>
<p><strong>The &quot;Pro&quot; way to delete (by line number)</strong>
Sometimes you don&#39;t remember the original command, so list them with numbers:</p>
<pre><code class="language-bash">sudo ufw status numbered
</code></pre>
<p>The result will look like <code>[ 1] 22/tcp ALLOW ....</code> To delete rule number 1, just run:</p>
<pre><code class="language-bash">sudo ufw delete 1
</code></pre>
<h3>6. Operation</h3>
<p>Once you have finished configuring the rules, it&#39;s time to turn the firewall ON:</p>
<pre><code class="language-bash">sudo ufw enable
</code></pre>
<p>To see detailed running rules:</p>
<pre><code class="language-bash">sudo ufw status verbose
</code></pre>
<p>If you messed up the configuration too much and want to start over (Reset):</p>
<pre><code class="language-bash">sudo ufw reset
</code></pre>
<h3>7. System Logging</h3>
<p>To know who is trying to &quot;intrude&quot; or to check if rules are working correctly, enable logging:</p>
<pre><code class="language-bash">sudo ufw logging on
# Set log level (low, medium, high). Default is low.
sudo ufw logging medium
</code></pre>
<p>Read logs at <code>/var/log/ufw.log</code> or via <code>dmesg</code>. A log line will look like this: <code>[UFW BLOCK] IN=eth0 ... SRC=123.45.67.89 DST=987.65.43.21 ... DPT=22</code></p>
<p><strong>Quick Decode:</strong></p>
<ul>
<li><code>[UFW BLOCK]</code>: Connection has been blocked.</li>
<li><code>SRC</code>: The IP address of the source sending the packet.</li>
<li><code>DPT</code> (Destination Port): The port they are trying to access (e.g., 22 is SSH).</li>
</ul>
<p><strong>Bonus: For the team that hates typing commands</strong>
If you prefer a Graphical User Interface (GUI), install GUFW:</p>
<pre><code class="language-bash">sudo apt install gufw
</code></pre>
<p>It provides an intuitive interface to toggle the firewall with just a few clicks.</p>
<p>Hope this article helps you manage your server safely and easily. If you have any questions, feel free to comment below!</p>
<hr>
<h3>L√†m ch·ªß t∆∞·ªùng l·ª≠a tr√™n Linux c·ª±c d·ªÖ v·ªõi UFW (Uncomplicated Firewall)</h3>
<p>Ch√†o m·ªçi ng∆∞·ªùi! N·∫øu b·∫°n t·ª´ng &quot;ƒëau ƒë·∫ßu&quot; khi nh√¨n v√†o m·ªõ quy t·∫Øc r·ªëi r·∫Øm c·ªßa iptables ƒë·ªÉ c·∫•u h√¨nh t∆∞·ªùng l·ª≠a, th√¨ UFW ch√≠nh l√† v·ªã c·ª©u tinh c·ªßa b·∫°n.</p>
<p>ƒê√∫ng nh∆∞ t√™n g·ªçi &quot;Uncomplicated Firewall&quot; (T∆∞·ªùng l·ª≠a kh√¥ng ph·ª©c t·∫°p), c√¥ng c·ª• n√†y sinh ra ƒë·ªÉ ƒë∆°n gi·∫£n h√≥a vi·ªác b·∫£o v·ªá server. N√≥ cung c·∫•p m·ªôt giao di·ªán d√≤ng l·ªánh c·ª±c k·ª≥ th√¢n thi·ªán ƒë·ªÉ qu·∫£n l√Ω iptables b√™n d∆∞·ªõi. H√¥m nay m√¨nh s·∫Ω h∆∞·ªõng d·∫´n c√°c b·∫°n nh·ªØng thao t√°c &quot;n·∫±m l√≤ng&quot; ƒë·ªÉ s·ª≠ d·ª•ng UFW nh√©.</p>
<h3>1. C√†i ƒë·∫∑t v√† Kh·ªüi ƒë·ªông</h3>
<p>Tr√™n c√°c distro nh∆∞ Ubuntu hay Debian, vi·ªác c√†i ƒë·∫∑t ch·ªâ t·ªën v√†i gi√¢y:</p>
<pre><code class="language-bash">sudo apt install ufw
</code></pre>
<p>M·∫∑c ƒë·ªãnh sau khi c√†i, UFW s·∫Ω ·ªü tr·∫°ng th√°i Inactive (kh√¥ng ho·∫°t ƒë·ªông) ƒë·ªÉ tr√°nh vi·ªác b·∫°n v·ª´a c√†i xong ƒë√£ b·ªã ch·∫∑n kh·ªèi server. ƒê·ªÉ ki·ªÉm tra tr·∫°ng th√°i:</p>
<pre><code class="language-bash">sudo ufw status
</code></pre>
<p>N·∫øu b·∫°n mu·ªën h·ªó tr·ª£ c·∫£ IPv6, h√£y m·ªü file c·∫•u h√¨nh v√† ki·ªÉm tra d√≤ng n√†y:</p>
<pre><code class="language-bash">sudo nano /etc/default/ufw
# ƒê·∫£m b·∫£o d√≤ng n√†y l√† yes
IPV6=yes
</code></pre>
<p>N·∫øu b·∫°n c·∫ßn kh·ªüi ƒë·ªông l·∫°i t∆∞·ªùng l·ª≠a sau khi ch·ªânh config:</p>
<pre><code class="language-bash">sudo ufw disable
sudo ufw enable
</code></pre>
<h3>2. Thi·∫øt l·∫≠p &quot;Lu·∫≠t ch∆°i&quot; m·∫∑c ƒë·ªãnh (Defaults)</h3>
<p>Nguy√™n t·∫Øc v√†ng trong b·∫£o m·∫≠t l√†: &quot;C·∫•m t·∫•t c·∫£, ch·ªâ m·ªü nh·ªØng g√¨ c·∫ßn thi·∫øt&quot;. Tr∆∞·ªõc khi m·ªü c·ªïng, h√£y thi·∫øt l·∫≠p m·∫∑c ƒë·ªãnh ch·∫∑n m·ªçi k·∫øt n·ªëi t·ª´ ngo√†i v√†o (incoming) v√† cho ph√©p m·ªçi k·∫øt n·ªëi t·ª´ trong ra (outgoing).</p>
<pre><code class="language-bash"># Ch·∫∑n t·∫•t c·∫£ chi·ªÅu v√†o
sudo ufw default deny incoming

# Cho ph√©p t·∫•t c·∫£ chi·ªÅu ra
sudo ufw default allow outgoing
</code></pre>
<p><strong>M·∫πo nh·ªè:</strong> ƒê·ªÉ UFW lu√¥n t·ª± b·∫≠t khi kh·ªüi ƒë·ªông m√°y, h√£y ki·ªÉm tra file <code>/etc/ufw/ufw.conf</code> v√† set <code>ENABLED=yes</code>.</p>
<h3>3. M·ªü c·ªïng k·∫øt n·ªëi (Allow)</h3>
<p><strong>Quan tr·ªçng nh·∫•t: SSH</strong>
ƒê·ª´ng bao gi·ªù b·∫≠t t∆∞·ªùng l·ª≠a m√† qu√™n m·ªü c·ªïng SSH, n·∫øu kh√¥ng b·∫°n s·∫Ω t·ª± nh·ªët m√¨nh ·ªü ngo√†i ƒë·∫•y!</p>
<pre><code class="language-bash"># C√°ch 1: G·ªçi t√™n d·ªãch v·ª•
sudo ufw allow ssh

# C√°ch 2: G·ªçi s·ªë port (m·∫∑c ƒë·ªãnh l√† 22)
sudo ufw allow 22/tcp
</code></pre>
<p><em>L∆∞u √Ω: N·∫øu b·∫°n ƒë√£ ƒë·ªïi port SSH sang s·ªë kh√°c (v√≠ d·ª• 2222), h√£y d√πng l·ªánh: <code>sudo ufw allow 2222/tcp</code>.</em></p>
<p><strong>Web Server (HTTP/HTTPS)</strong>
Cho ph√©p truy c·∫≠p web:</p>
<pre><code class="language-bash">sudo ufw allow www
# Ho·∫∑c
sudo ufw allow 80/tcp
</code></pre>
<p><strong>FTP Server</strong></p>
<pre><code class="language-bash">sudo ufw allow ftp
# Ho·∫∑c
sudo ufw allow 21/tcp
</code></pre>
<p><strong>M·ªü m·ªôt d·∫£i Port</strong>
N·∫øu ·ª©ng d·ª•ng c·ªßa b·∫°n c·∫ßn m·ªôt d·∫£i c·ªïng r·ªông (v√≠ d·ª• t·ª´ 100 ƒë·∫øn 300):</p>
<pre><code class="language-bash">sudo ufw allow 100:300/tcp
sudo ufw allow 100:300/udp
</code></pre>
<h3>4. C·∫•u h√¨nh n√¢ng cao (Specific IP)</h3>
<p>ƒê√¢y l√† c√°ch tuy·ªát v·ªùi ƒë·ªÉ tƒÉng c∆∞·ªùng b·∫£o m·∫≠t. Thay v√¨ m·ªü c·ª≠a cho c·∫£ th·∫ø gi·ªõi, b·∫°n ch·ªâ m·ªü c·ª≠a cho m·ªôt ng∆∞·ªùi c·ª• th·ªÉ.</p>
<p><strong>Cho ph√©p 1 IP c·ª• th·ªÉ:</strong></p>
<pre><code class="language-bash">sudo ufw allow from 192.168.0.100
</code></pre>
<p><strong>Cho ph√©p c·∫£ m·ªôt Subnet (M·∫°ng con):</strong></p>
<pre><code class="language-bash">sudo ufw allow from 123.45.67.89/24
</code></pre>
<p><strong>Combo: Ch·ªâ cho ph√©p IP n√†y v√†o Port n√†y:</strong>
V√≠ d·ª•: Ch·ªâ cho m√°y S·∫øp (IP 123.45.67.89) ƒë∆∞·ª£c SSH v√†o server.</p>
<pre><code class="language-bash">sudo ufw allow from 123.45.67.89 to any port 22 proto tcp
</code></pre>
<h3>5. Qu·∫£n l√Ω v√† X√≥a quy t·∫Øc</h3>
<p>L·ª° tay th√™m nh·∫ßm lu·∫≠t? Kh√¥ng sao c·∫£.</p>
<p><strong>Ch·∫∑n k·∫øt n·ªëi (Deny)</strong>
M·∫∑c d√π m·∫∑c ƒë·ªãnh ch√∫ng ta ƒë√£ ch·∫∑n h·∫øt, nh∆∞ng n·∫øu c·∫ßn ch·∫∑n c·ª• th·ªÉ m·ªôt port n√†o ƒë√≥ ƒëang m·ªü:</p>
<pre><code class="language-bash">sudo ufw deny 80/tcp
</code></pre>
<p><strong>X√≥a quy t·∫Øc (Delete)</strong>
C√°ch ƒë∆°n gi·∫£n nh·∫•t l√† th√™m t·ª´ delete v√†o tr∆∞·ªõc c√¢u l·ªánh c≈©:</p>
<pre><code class="language-bash">sudo ufw delete allow 80/tcp
</code></pre>
<p><strong>C√°ch x√≥a chuy√™n nghi·ªáp h∆°n (theo s·ªë th·ª© t·ª±)</strong>
ƒê√¥i khi b·∫°n kh√¥ng nh·ªõ c√¢u l·ªánh g·ªëc, h√£y li·ªát k√™ ch√∫ng ra k√®m s·ªë th·ª© t·ª±:</p>
<pre><code class="language-bash">sudo ufw status numbered
</code></pre>
<p>K·∫øt qu·∫£ s·∫Ω c√≥ d·∫°ng <code>[ 1] 22/tcp ALLOW ....</code> Mu·ªën x√≥a quy t·∫Øc s·ªë 1, ch·ªâ c·∫ßn:</p>
<pre><code class="language-bash">sudo ufw delete 1
</code></pre>
<h3>6. V·∫≠n h√†nh</h3>
<p>Sau khi ƒë√£ c·∫•u h√¨nh xong xu√¥i c√°c quy t·∫Øc, gi·ªù l√† l√∫c B·∫¨T t∆∞·ªùng l·ª≠a l√™n:</p>
<pre><code class="language-bash">sudo ufw enable
</code></pre>
<p>ƒê·ªÉ xem chi ti·∫øt c√°c quy t·∫Øc ƒëang ch·∫°y:</p>
<pre><code class="language-bash">sudo ufw status verbose
</code></pre>
<p>N·∫øu b·∫°n c·∫•u h√¨nh sai qu√° nhi·ªÅu v√† mu·ªën l√†m l·∫°i t·ª´ ƒë·∫ßu (Reset):</p>
<pre><code class="language-bash">sudo ufw reset
</code></pre>
<h3>7. Nh·∫≠t k√Ω h·ªá th·ªëng (Logging)</h3>
<p>ƒê·ªÉ bi·∫øt ai ƒëang c·ªë g·∫Øng &quot;ƒë·ªôt nh·∫≠p&quot; ho·∫∑c ki·ªÉm tra xem rule c√≥ ch·∫°y ƒë√∫ng kh√¥ng, h√£y b·∫≠t log:</p>
<pre><code class="language-bash">sudo ufw logging on
# Ch·ªânh m·ª©c ƒë·ªô log (low, medium, high). M·∫∑c ƒë·ªãnh l√† low.
sudo ufw logging medium
</code></pre>
<p>ƒê·ªçc log t·∫°i <code>/var/log/ufw.log</code> ho·∫∑c <code>dmesg</code>. M·ªôt d√≤ng log s·∫Ω tr√¥ng nh∆∞ th·∫ø n√†y: <code>[UFW BLOCK] IN=eth0 ... SRC=123.45.67.89 DST=987.65.43.21 ... DPT=22</code></p>
<p><strong>Gi·∫£i m√£ nhanh:</strong></p>
<ul>
<li><code>[UFW BLOCK]</code>: K·∫øt n·ªëi ƒë√£ b·ªã ch·∫∑n.</li>
<li><code>SRC</code>: IP c·ªßa k·∫ª ƒëang g·ª≠i g√≥i tin ƒë·∫øn.</li>
<li><code>DPT</code> (Destination Port): C·ªïng m√† h·ªç ƒëang c·ªë truy c·∫≠p (v√≠ d·ª• 22 l√† SSH).</li>
</ul>
<p><strong>Bonus: D√†nh cho team kh√¥ng th√≠ch g√µ l·ªánh</strong>
N·∫øu b·∫°n th√≠ch giao di·ªán ƒë·ªì h·ªça (GUI), h√£y c√†i ƒë·∫∑t GUFW:</p>
<pre><code class="language-bash">sudo apt install gufw
</code></pre>
<p>N√≥ cung c·∫•p m·ªôt giao di·ªán tr·ª±c quan ƒë·ªÉ b·∫°n b·∫≠t t·∫Øt firewall ch·ªâ b·∫±ng nh·ªØng c√∫ click chu·ªôt.</p>

        </div>
    </article>

    <div style="margin-top: 40px;">
        <a href="/dulkanggg/">&larr; Back to Home</a>
    </div>

    <footer>
    <p>&copy; 2025 Khang. All rights reserved.</p>
    <div class="social-links">
        <a href="https://github.com/khanchannn" target="_blank">GitHub</a>
        <a href="https://www.facebook.com/dulkanggg1504/" target="_blank">Facebook</a>
        <a href="mailto:dulkanggg1504@gmail.com">Email</a>
    </div>
</footer>
</div> <!-- End container -->
</body>

</html>

        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const codeBlocks = document.querySelectorAll('.post-content pre');

                codeBlocks.forEach(pre => {
                    const button = document.createElement('button');
                    button.className = 'copy-btn';
                    button.textContent = 'Copy';

                    button.addEventListener('click', () => {
                        const code = pre.querySelector('code').innerText;
                        navigator.clipboard.writeText(code).then(() => {
                            button.textContent = 'Copied!';
                            setTimeout(() => {
                                button.textContent = 'Copy';
                            }, 2000);
                        }).catch(err => {
                            console.error('Failed to copy:', err);
                            button.textContent = 'Error';
                        });
                    });

                    pre.appendChild(button);
                });
            });
        </script>