<%- include('partials/header', { basePath: basePath }) %>

    <article class="post-content">
        <h1 style="color: #e2b714;">
            <%= post.title %>
        </h1>
        <div style="color: var(--accent-color); margin-bottom: 20px;">
            <span>
                <%= post.date %>
            </span>
            <% if (post.tags) { %>
                | Tags:
                <% post.tags.forEach(tag=> { %>
                    <a href="<%= basePath %>/tags/<%= tag %>"
                        style="color: var(--accent-color); text-decoration: underline;">
                        <%= tag %>
                    </a>
                    <% }) %>
                        <% } %>
        </div>

        <div>
            <%- post.htmlContent %>
        </div>
    </article>

    <div style="margin-top: 40px;">
        <a href="<%= basePath %>/">&larr; Back to Home</a>
    </div>

    <%- include('partials/footer') %>

        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const codeBlocks = document.querySelectorAll('.post-content pre');

                codeBlocks.forEach(pre => {
                    const button = document.createElement('button');
                    button.className = 'copy-btn';
                    button.textContent = 'Copy';

                    button.addEventListener('click', () => {
                        const code = pre.querySelector('code').innerText;
                        navigator.clipboard.writeText(code).then(() => {
                            button.textContent = 'Copied!';
                            setTimeout(() => {
                                button.textContent = 'Copy';
                            }, 2000);
                        }).catch(err => {
                            console.error('Failed to copy:', err);
                            button.textContent = 'Error';
                        });
                    });

                    pre.appendChild(button);
                });
            });
        </script>