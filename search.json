[{"title":"PortSentry: Detecting and Blocking Port Scans","slug":"portsentry","date":"2025-12-03","tags":["ubuntu","vps","security","network","bilingual"],"body":"> *üáªüá≥ B·∫£n ti·∫øng Vi·ªát n·∫±m ·ªü ph√≠a d∆∞·ªõi b√†i vi·∫øt (Vietnamese version is available below).*\r\n\r\n---\r\n\r\n### PortSentry: Detecting and Blocking Port Scans\r\nPortSentry is a classic Intrusion Detection System (IDS) specialized in monitoring and preventing port scanning activities on servers. Although active development has ceased, it remains an excellent lesson in active defense mechanisms for anyone working in system security.\r\n\r\nThis article will guide you through cross-platform installation and detailed configuration ranging from basic to \"paranoid.\"\r\n\r\n### 1. Installing PortSentry on Various Distros\r\nDepending on your operating system, choose the appropriate installation method:\r\n\r\n**Debian/Ubuntu/Kali Linux:** Install directly from the official repositories:\r\n\r\n```bash\r\nsudo apt-get update\r\nsudo apt-get install portsentry\r\n```\r\n\r\n**Fedora/CentOS/RHEL:** Typically, you will need to download the RPM package. Then use the command:\r\n\r\n```bash\r\nrpm -i portsentry*\r\n```\r\n(Note: If the RPM package is not found, you may need to compile from source or search within the EPEL repository).\r\n\r\n**Arch Linux:** Use the AUR (Arch User Repository). The old command was `yaourt`, but nowadays you can use `yay` or `paru`:\r\n\r\n```bash\r\nyaourt -S portsentry\r\n# Or\r\nyay -S portsentry\r\n```\r\n\r\n### 2. Configuring Monitoring Tactics\r\nThe main configuration file is located at `/etc/portsentry/portsentry.conf`. We will open it to edit:\r\n\r\n```bash\r\nsudo nano /etc/portsentry/portsentry.conf\r\n```\r\n\r\n#### A. Selecting Port Monitoring Sets (Port Configuration)\r\nPortSentry provides 3 pre-set monitoring levels. You need to uncomment (#) one of the following sets depending on your security \"sensitivity\":\r\n\r\n**Level 1: \"Really Anal\" (Paranoid/Strict)**\r\nSelect this set if you want to monitor almost all sensitive ports. Anyone touching them will be dealt with. This is the recommended choice.\r\n\r\n```bash\r\n# Un-comment these if you are really anal:\r\nTCP_PORTS=\"1,7,9,11,15,70,79,80,109,110,111,119,138,139,143,512,513,514,515,540,635,1080,1524,2000,2001,4000,4001,5742,6000,6001,6667,12345,12346,20034,30303,32771,32772,32773,32774,31337,40421,40425,49724,54320\"\r\nUDP_PORTS=\"1,7,9,66,67,68,69,111,137,138,161,162,474,513,517,518,635,640,641,666,700,2049,32770,32771,32772,32773,32774,31337,54321\"\r\n```\r\n\r\n**Level 2: \"Aware\"**\r\nMonitors common ports, balancing security and performance.\r\n\r\n```bash\r\n# Use these if you just want to be aware:\r\n# TCP_PORTS=\"1,11,15,79,111,119,143,540,635,1080,1524,2000,5742,6667,12345,12346,20034,31337,32771,32772,32773,32774,40421,49724,54320\"\r\n# UDP_PORTS=\"1,7,9,69,161,162,513,635,640,641,700,32770,32771,32772,32773,32774,31337,54321\"\r\n```\r\n\r\n**Level 3: \"Bare-bones\" (Basic)**\r\nMinimal monitoring. Not recommended unless the server is extremely underpowered.\r\n\r\n#### B. Configuring Stealth Scan\r\nIn addition to the ports above, you can configure monitoring for high port ranges (above 1024) to detect stealth scanning techniques.\r\n\r\n```bash\r\nADVANCED_PORTS_TCP=\"1023\"\r\nADVANCED_PORTS_UDP=\"1023\"\r\n```\r\n\r\nCrucially, make sure to exclude ports that you are actually using (e.g., Web, DNS, NetBIOS ports) to avoid blocking valid users:\r\n\r\n```bash\r\nADVANCED_EXCLUDE_TCP=\"113,139\"\r\nADVANCED_EXCLUDE_UDP=\"520,138,137,67\"\r\n```\r\n\r\n### 3. Configuring Response and Blocking\r\nWhat should PortSentry do when an attack is detected?\r\n\r\n**Activate Blocking Mode**\r\nEnsure the following two lines are set to 1 (1 = Block, 0 = Log only, 2 = Run external command):\r\n\r\n```bash\r\nBLOCK_UDP=\"1\"\r\nBLOCK_TCP=\"1\"\r\n```\r\n\r\n**Blocking Method: TCP Wrappers**\r\nA classic but effective blocking method is using `hosts.deny`. When an attacking IP is detected, PortSentry writes that IP to `/etc/hosts.deny`, causing services that support TCP Wrappers (like older SSH configs) to reject connections immediately.\r\n\r\nFind and uncomment this line:\r\n\r\n```bash\r\nKILL_HOSTS_DENY=\"ALL: $TARGET$ : DENY\"\r\n```\r\n(Note: `$TARGET$` is the variable representing the attacker's IP).\r\n\r\n**Log Files and History**\r\nCheck the log file paths to ensure PortSentry records data in the correct location (Note: paths may vary by distro, e.g., `/etc/portsentry/...` or `/usr/pkg/etc/...`):\r\n\r\n```bash\r\n# Hosts to ignore (Whitelist)\r\nIGNORE_FILE=\"/etc/portsentry/portsentry.ignore\"\r\n# Hosts that have been denied (Blocking History)\r\nHISTORY_FILE=\"/etc/portsentry/portsentry.history\"\r\n# Hosts blocked in this session (Current Session)\r\nBLOCKED_FILE=\"/etc/portsentry/portsentry.blocked\"\r\n```\r\n\r\n### 4. Psychological Tactics: Port Banner\r\nYou can leave a message for the attacker if they intentionally connect to trap ports. This is an interesting feature to serve as a warning.\r\n\r\n```bash\r\nPORT_BANNER=\"** UNAUTHORIZED ACCESS PROHIBITED *** YOUR CONNECTION ATTEMPT HAS BEEN LOGGED. GO AWAY.\"\r\n```\r\n\r\n### 5. The Most Important Step: Whitelist (Ignore File)\r\nDo not lock yourself out! Before starting, you absolutely must add your own IP and the local IP to the ignore list.\r\n\r\nOpen the `portsentry.ignore` file (path configured in step 3):\r\n\r\n```bash\r\nsudo nano /etc/portsentry/portsentry.ignore\r\n```\r\n\r\nAdd the following:\r\n\r\n```plaintext\r\n127.0.0.1/32\r\n0.0.0.0\r\n[Your Machine's IP]\r\n[Gateway IP]\r\n```\r\n\r\n### 6. Start and Verify\r\nAfter completion, restart the service:\r\n\r\n```bash\r\nsudo service portsentry restart\r\n```\r\n\r\nTo verify, use another machine to run a simple nmap scan against the server. Then check the `/etc/hosts.deny` file on the server; you should see the attacking machine's IP added to the blacklist along with the warning line.\r\n\r\n### Advanced: Sending Email Alerts When Attacks are Detected\r\nReceiving real-time notifications is a core part of DevSecOps and cybersecurity monitoring.\r\n\r\nBelow is a detailed guide on how to write a simple Shell script to send emails and integrate it into PortSentry's `KILL_RUN_CMD`.\r\n\r\n#### 1. Prepare the Email Environment\r\nTo allow the Linux server to send emails, you need to install the `mailutils` package (on Debian/Ubuntu) or `mailx` (on CentOS).\r\n\r\n**Ubuntu/Debian:**\r\n\r\n```bash\r\nsudo apt-get update\r\nsudo apt-get install mailutils\r\n```\r\n(During installation, if asked to configure Postfix, you can select \"Internet Site\" if the server has a domain, or \"Local only\" for internal testing. However, to send to actual Gmail/Outlook, the server needs SMTP Relay configuration, but let's proceed with creating the script first).\r\n\r\n#### 2. Write the Alert Script (portsentry_alert.sh)\r\nWe will write a script that accepts the Attacker's IP and the Scanned Port as parameters, then composes and sends an email.\r\n\r\nCreate the script file:\r\n\r\n```bash\r\nsudo nano /usr/local/bin/portsentry_alert.sh\r\n```\r\n\r\nPaste the following content:\r\n\r\n```bash\r\n#!/bin/bash\r\n\r\n# ==========================================\r\n# CONFIGURATION\r\n# ==========================================\r\nTO_EMAIL=\"admin@unitrade.id.vn\"  # Replace with your email\r\nSUBJECT=\"[ALERT] PortSentry Detected Attack!\"\r\nSERVER_NAME=$(hostname)\r\nDATE=$(date \"+%Y-%m-%d %H:%M:%S\")\r\n\r\n# Receive parameters from PortSentry\r\nTARGET_IP=$1\r\nTARGET_PORT=$2\r\n\r\n# ==========================================\r\n# EMAIL CONTENT\r\n# ==========================================\r\nBODY=\"\r\nSecurity Alert from Server: $SERVER_NAME\r\n------------------------------------------------\r\nDetection Time      : $DATE\r\nAction Taken        : Blocked\r\nAttacker IP         : $TARGET_IP\r\nScanned Port        : $TARGET_PORT\r\n------------------------------------------------\r\nSystem has automatically added a rule to iptables/hosts.deny.\r\nPlease check logs at /var/log/syslog for more details.\r\n\"\r\n\r\n# ==========================================\r\n# SEND MAIL\r\n# ==========================================\r\necho \"$BODY\" | mail -s \"$SUBJECT\" \"$TO_EMAIL\"\r\n```\r\n\r\nGrant execution permissions to the script:\r\n\r\n```bash\r\nsudo chmod +x /usr/local/bin/portsentry_alert.sh\r\n```\r\n\r\n#### 3. Integrate Script into PortSentry\r\nNow we go back to the PortSentry configuration file to \"teach\" it how to call this script when an attack is detected.\r\n\r\nOpen the config file:\r\n\r\n```bash\r\nsudo nano /etc/portsentry/portsentry.conf\r\n```\r\n\r\nFind the `KILL_RUN_CMD` line. This line allows running an external command before blocking the IP. Edit it as follows:\r\n\r\n```bash\r\n# $TARGET$ is the variable containing the IP, $PORT$ is the variable containing the port\r\nKILL_RUN_CMD=\"/usr/local/bin/portsentry_alert.sh $TARGET$ $PORT$\"\r\n```\r\n\r\n**Important Note:** Ensure `BLOCK_UDP` and `BLOCK_TCP` variables are in mode 1 (Block) or 2 (Run Command Only) for the above command to execute. It is best to leave it at 1 to both block and send the email.\r\n\r\n#### 4. Restart and Test\r\nRestart PortSentry:\r\n\r\n```bash\r\nsudo service portsentry restart\r\n```\r\n\r\n**Attack Simulation:** Use another machine (or a phone using 4G - to have a different IP than the LAN) to scan:\r\n\r\n```bash\r\nnmap -p 1-100 <Your_Server_IP>\r\n```\r\n\r\nIf successful, you will receive an email with the content: `Subject: [ALERT] PortSentry Detected Attack! Body: Security Alert... Attacker IP: 1.2.3.4.`\r\n\r\n-------\r\n\r\n### H∆∞·ªõng d·∫´n to√†n t·∫≠p v·ªÅ PortSentry: Ph√°t hi·ªán v√† Ch·∫∑n ƒë·ª©ng Port Scan\r\nPortSentry l√† m·ªôt c√¥ng c·ª• ph√°t hi·ªán x√¢m nh·∫≠p (IDS) kinh ƒëi·ªÉn, chuy√™n d√πng ƒë·ªÉ gi√°m s√°t v√† ngƒÉn ch·∫∑n c√°c h√†nh vi qu√©t c·ªïng (port scanning) tr√™n m√°y ch·ªß. D√π c√¥ng c·ª• n√†y ƒë√£ ng·ª´ng ph√°t tri·ªÉn, n√≥ v·∫´n l√† m·ªôt b√†i h·ªçc tuy·ªát v·ªùi v·ªÅ c∆° ch·∫ø ph√≤ng th·ªß ch·ªß ƒë·ªông cho b·∫•t k·ª≥ ai l√†m v·ªÅ b·∫£o m·∫≠t h·ªá th·ªëng.\r\n\r\nB√†i vi·∫øt n√†y s·∫Ω h∆∞·ªõng d·∫´n b·∫°n c√†i ƒë·∫∑t tr√™n ƒëa n·ªÅn t·∫£ng v√† c·∫•u h√¨nh chi ti·∫øt t·ª´ c∆° b·∫£n ƒë·∫øn \"paranoid\" (c·ª±c ƒëoan).\r\n\r\n### 1. C√†i ƒë·∫∑t PortSentry tr√™n c√°c Distro\r\nT√πy v√†o h·ªá ƒëi·ªÅu h√†nh b·∫°n ƒëang s·ª≠ d·ª•ng, h√£y ch·ªçn ph∆∞∆°ng ph√°p c√†i ƒë·∫∑t ph√π h·ª£p:\r\n\r\n**Debian/Ubuntu/Kali Linux:** C√†i ƒë·∫∑t tr·ª±c ti·∫øp t·ª´ kho l∆∞u tr·ªØ ch√≠nh th·ª©c:\r\n\r\n```bash\r\nsudo apt-get update\r\nsudo apt-get install portsentry\r\n```\r\n\r\n**Fedora/CentOS/RHEL:** Th√¥ng th∆∞·ªùng b·∫°n s·∫Ω c·∫ßn t·∫£i g√≥i RPM v·ªÅ m√°y. Sau ƒë√≥ s·ª≠ d·ª•ng l·ªánh:\r\n\r\n```bash\r\nrpm -i portsentry*\r\n```\r\n(L∆∞u √Ω: N·∫øu kh√¥ng t√¨m th·∫•y g√≥i RPM, b·∫°n c√≥ th·ªÉ c·∫ßn bi√™n d·ªãch t·ª´ m√£ ngu·ªìn ho·∫∑c t√¨m trong kho EPEL).\r\n\r\n**Arch Linux:** S·ª≠ d·ª•ng AUR (Arch User Repository). L·ªánh c≈© l√† `yaourt`, nh∆∞ng hi·ªán nay b·∫°n c√≥ th·ªÉ d√πng `yay` ho·∫∑c `paru`:\r\n\r\n```bash\r\nyaourt -S portsentry\r\n# Ho·∫∑c\r\nyay -S portsentry\r\n```\r\n\r\n### 2. C·∫•u h√¨nh Chi·∫øn thu·∫≠t Gi√°m s√°t\r\nFile c·∫•u h√¨nh ch√≠nh n·∫±m t·∫°i `/etc/portsentry/portsentry.conf`. Ch√∫ng ta s·∫Ω m·ªü n√≥ l√™n v√† ch·ªânh s·ª≠a:\r\n\r\n```bash\r\nsudo nano /etc/portsentry/portsentry.conf\r\n```\r\n\r\n#### A. L·ª±a ch·ªçn b·ªô c·ªïng gi√°m s√°t (Port Configuration)\r\nPortSentry cung c·∫•p s·∫µn 3 c·∫•p ƒë·ªô gi√°m s√°t. B·∫°n c·∫ßn b·ªè d·∫•u comment (#) ·ªü m·ªôt trong c√°c b·ªô sau t√πy theo m·ª©c ƒë·ªô \"nh·∫°y c·∫£m\" v·ªÅ b·∫£o m·∫≠t c·ªßa b·∫°n:\r\n\r\n**C·∫•p ƒë·ªô 1: \"Really Anal\" (C·ª±c ƒëoan/K·ªπ t√≠nh)**\r\nCh·ªçn b·ªô n√†y n·∫øu b·∫°n mu·ªën gi√°m s√°t g·∫ßn nh∆∞ t·∫•t c·∫£ c√°c c·ªïng nh·∫°y c·∫£m. B·∫•t k·ª≥ ai ch·∫°m v√†o ƒë·ªÅu s·∫Ω b·ªã x·ª≠ l√Ω. ƒê√¢y l√† l·ª±a ch·ªçn t√¥i khuy√™n d√πng.\r\n\r\n```bash\r\n# Un-comment these if you are really anal:\r\nTCP_PORTS=\"1,7,9,11,15,70,79,80,109,110,111,119,138,139,143,512,513,514,515,540,635,1080,1524,2000,2001,4000,4001,5742,6000,6001,6667,12345,12346,20034,30303,32771,32772,32773,32774,31337,40421,40425,49724,54320\"\r\nUDP_PORTS=\"1,7,9,66,67,68,69,111,137,138,161,162,474,513,517,518,635,640,641,666,700,2049,32770,32771,32772,32773,32774,31337,54321\"\r\n```\r\n\r\n**C·∫•p ƒë·ªô 2: \"Aware\" (C·∫£nh gi√°c)**\r\nGi√°m s√°t c√°c c·ªïng ph·ªï bi·∫øn, c√¢n b·∫±ng gi·ªØa b·∫£o m·∫≠t v√† hi·ªáu nƒÉng.\r\n\r\n```bash\r\n# Use these if you just want to be aware:\r\n# TCP_PORTS=\"1,11,15,79,111,119,143,540,635,1080,1524,2000,5742,6667,12345,12346,20034,31337,32771,32772,32773,32774,40421,49724,54320\"\r\n# UDP_PORTS=\"1,7,9,69,161,162,513,635,640,641,700,32770,32771,32772,32773,32774,31337,54321\"\r\n```\r\n\r\n**C·∫•p ƒë·ªô 3: \"Bare-bones\" (C∆° b·∫£n)**\r\nCh·ªâ gi√°m s√°t t·ªëi thi·ªÉu. Kh√¥ng khuy·∫øn kh√≠ch d√πng tr·ª´ khi server qu√° y·∫øu.\r\n\r\n#### B. C·∫•u h√¨nh Stealth Scan (Qu√©t ·∫©n)\r\nNgo√†i c√°c c·ªïng tr√™n, b·∫°n c√≥ th·ªÉ c·∫•u h√¨nh gi√°m s√°t d·∫£i c·ªïng cao (tr√™n 1024) ƒë·ªÉ ph√°t hi·ªán c√°c k·ªπ thu·∫≠t qu√©t l√©n l√∫t.\r\n\r\n```bash\r\nADVANCED_PORTS_TCP=\"1023\"\r\nADVANCED_PORTS_UDP=\"1023\"\r\n```\r\n\r\nƒê·∫∑c bi·ªát, h√£y lo·∫°i tr·ª´ (exclude) c√°c c·ªïng m√† b·∫°n ƒëang th·ª±c s·ª± s·ª≠ d·ª•ng (v√≠ d·ª• c·ªïng Web, DNS, NetBIOS) ƒë·ªÉ tr√°nh ch·∫∑n nh·∫ßm ng∆∞·ªùi d√πng h·ª£p l·ªá:\r\n\r\n```bash\r\nADVANCED_EXCLUDE_TCP=\"113,139\"\r\nADVANCED_EXCLUDE_UDP=\"520,138,137,67\"\r\n```\r\n\r\n### 3. C·∫•u h√¨nh Ph·∫£n ·ª©ng v√† Ch·∫∑n (Blocking)\r\nKhi ph√°t hi·ªán t·∫•n c√¥ng, PortSentry s·∫Ω l√†m g√¨?\r\n\r\n**K√≠ch ho·∫°t ch·∫ø ƒë·ªô ch·∫∑n**\r\nƒê·∫£m b·∫£o hai d√≤ng sau ƒë∆∞·ª£c ƒë·∫∑t gi√° tr·ªã 1 (1 = Ch·∫∑n, 0 = Ch·ªâ ghi log, 2 = Ch·∫°y l·ªánh ngo√†i):\r\n\r\n```bash\r\nBLOCK_UDP=\"1\"\r\nBLOCK_TCP=\"1\"\r\n```\r\n\r\n**Ph∆∞∆°ng ph√°p ch·∫∑n: TCP Wrappers**\r\nM·ªôt ph∆∞∆°ng ph√°p ch·∫∑n c·ªï ƒëi·ªÉn nh∆∞ng hi·ªáu qu·∫£ l√† s·ª≠ d·ª•ng `hosts.deny`. Khi ph√°t hi·ªán IP t·∫•n c√¥ng, PortSentry s·∫Ω ghi IP ƒë√≥ v√†o file `/etc/hosts.deny`, l√†m cho c√°c d·ªãch v·ª• h·ªó tr·ª£ TCP Wrappers (nh∆∞ SSH c≈©) t·ª´ ch·ªëi k·∫øt n·ªëi ngay l·∫≠p t·ª©c.\r\n\r\nT√¨m v√† b·ªè comment d√≤ng n√†y:\r\n\r\n```bash\r\nKILL_HOSTS_DENY=\"ALL: $TARGET$ : DENY\"\r\n```\r\n(L∆∞u √Ω: `$TARGET$` l√† bi·∫øn ƒë·∫°i di·ªán cho IP c·ªßa k·∫ª t·∫•n c√¥ng).\r\n\r\n**File Log v√† L·ªãch s·ª≠**\r\nKi·ªÉm tra ƒë∆∞·ªùng d·∫´n file log ƒë·ªÉ ƒë·∫£m b·∫£o PortSentry ghi d·ªØ li·ªáu ƒë√∫ng ch·ªó (L∆∞u √Ω ƒë∆∞·ªùng d·∫´n c√≥ th·ªÉ kh√°c nhau t√πy distro, v√≠ d·ª• `/etc/portsentry/...` ho·∫∑c `/usr/pkg/etc/...`):\r\n\r\n```bash\r\n# Hosts to ignore (Danh s√°ch tr·∫Øng)\r\nIGNORE_FILE=\"/etc/portsentry/portsentry.ignore\"\r\n# Hosts that have been denied (L·ªãch s·ª≠ ch·∫∑n)\r\nHISTORY_FILE=\"/etc/portsentry/portsentry.history\"\r\n# Hosts blocked in this session (Phi√™n hi·ªán t·∫°i)\r\nBLOCKED_FILE=\"/etc/portsentry/portsentry.blocked\"\r\n```\r\n\r\n### 4. \"ƒê√≤n t√¢m l√Ω\": Port Banner\r\nB·∫°n c√≥ th·ªÉ ƒë·ªÉ l·∫°i m·ªôt l·ªùi nh·∫Øn cho k·∫ª t·∫•n c√¥ng n·∫øu ch√∫ng c·ªë t√¨nh k·∫øt n·ªëi v√†o c√°c c·ªïng b·∫´y. ƒê√¢y l√† m·ªôt t√≠nh nƒÉng th√∫ v·ªã ƒë·ªÉ c·∫£nh b√°o.\r\n\r\n```bash\r\nPORT_BANNER=\"** UNAUTHORIZED ACCESS PROHIBITED *** YOUR CONNECTION ATTEMPT HAS BEEN LOGGED. GO AWAY.\"\r\n```\r\n\r\n### 5. B∆∞·ªõc quan tr·ªçng nh·∫•t: Whitelist (Ignore File)\r\nƒê·ª´ng t·ª± nh·ªët m√¨nh ·ªü ngo√†i! Tr∆∞·ªõc khi kh·ªüi ƒë·ªông, b·∫°n b·∫Øt bu·ªôc ph·∫£i th√™m IP c·ªßa ch√≠nh m√¨nh v√† IP local v√†o danh s√°ch b·ªè qua.\r\n\r\nM·ªü file `portsentry.ignore` (ƒë∆∞·ªùng d·∫´n ƒë√£ c·∫•u h√¨nh ·ªü b∆∞·ªõc 3):\r\n\r\n```bash\r\nsudo nano /etc/portsentry/portsentry.ignore\r\n```\r\n\r\nTh√™m v√†o:\r\n\r\n```plaintext\r\n127.0.0.1/32\r\n0.0.0.0\r\n[IP C·ªßa M√°y B·∫°n]\r\n[IP Gateway]\r\n```\r\n\r\n### 6. Kh·ªüi ƒë·ªông v√† Ki·ªÉm tra\r\nSau khi ho√†n t·∫•t, kh·ªüi ƒë·ªông l·∫°i d·ªãch v·ª•:\r\n\r\n```bash\r\nsudo service portsentry restart\r\n```\r\n\r\nƒê·ªÉ ki·ªÉm tra, h√£y d√πng m·ªôt m√°y kh√°c th·ª±c hi·ªán l·ªánh nmap ƒë∆°n gi·∫£n v√†o server. Sau ƒë√≥ ki·ªÉm tra file `/etc/hosts.deny` tr√™n server, b·∫°n s·∫Ω th·∫•y IP c·ªßa m√°y t·∫•n c√¥ng ƒë√£ b·ªã th√™m v√†o danh s√°ch ƒëen k√®m theo d√≤ng c·∫£nh b√°o.\r\n\r\n### N√¢ng cao: G·ª≠i Email C·∫£nh B√°o Khi Ph√°t Hi·ªán T·∫•n C√¥ng v·ªõi PortSentry\r\nVi·ªác nh·∫≠n th√¥ng b√°o ngay l·∫≠p t·ª©c (Real-time Notification) l√† m·ªôt ph·∫ßn c·ªët l√µi c·ªßa DevSecOps v√† gi√°m s√°t an ninh m·∫°ng.\r\n\r\nD∆∞·ªõi ƒë√¢y l√† h∆∞·ªõng d·∫´n chi ti·∫øt c√°ch vi·∫øt m·ªôt script Shell ƒë∆°n gi·∫£n ƒë·ªÉ g·ª≠i email v√† t√≠ch h·ª£p n√≥ v√†o `KILL_RUN_CMD` c·ªßa PortSentry.\r\n\r\n#### 1. Chu·∫©n b·ªã m√¥i tr∆∞·ªùng g·ª≠i mail\r\nƒê·ªÉ server Linux g·ª≠i ƒë∆∞·ª£c email, b·∫°n c·∫ßn c√†i ƒë·∫∑t g√≥i `mailutils` (tr√™n Debian/Ubuntu) ho·∫∑c `mailx` (tr√™n CentOS).\r\n\r\n**Ubuntu/Debian:**\r\n\r\n```bash\r\nsudo apt-get update\r\nsudo apt-get install mailutils\r\n```\r\n(Trong qu√° tr√¨nh c√†i ƒë·∫∑t, n·∫øu n√≥ h·ªèi c·∫•u h√¨nh Postfix, b·∫°n c√≥ th·ªÉ ch·ªçn \"Internet Site\" n·∫øu server c√≥ domain, ho·∫∑c \"Local only\" n·∫øu ch·ªâ test n·ªôi b·ªô. Tuy nhi√™n, ƒë·ªÉ g·ª≠i ra Gmail/Outlook th·ª±c t·∫ø, server c·∫ßn c·∫•u h√¨nh SMTP Relay, nh∆∞ng ta c·ª© ƒëi qua b∆∞·ªõc t·∫°o script tr∆∞·ªõc).\r\n\r\n#### 2. Vi·∫øt Script C·∫£nh B√°o (portsentry_alert.sh)\r\nCh√∫ng ta s·∫Ω vi·∫øt m·ªôt script nh·∫≠n tham s·ªë l√† IP k·∫ª t·∫•n c√¥ng v√† C·ªïng b·ªã qu√©t, sau ƒë√≥ so·∫°n n·ªôi dung v√† g·ª≠i mail.\r\n\r\nT·∫°o file script:\r\n\r\n```bash\r\nsudo nano /usr/local/bin/portsentry_alert.sh\r\n```\r\n\r\nD√°n n·ªôi dung sau v√†o:\r\n\r\n```bash\r\n#!/bin/bash\r\n\r\n# ==========================================\r\n# C·∫§U H√åNH\r\n# ==========================================\r\nTO_EMAIL=\"admin@unitrade.id.vn\"  # Thay b·∫±ng email c·ªßa b·∫°n\r\nSUBJECT=\"[ALERT] PortSentry Detected Attack!\"\r\nSERVER_NAME=$(hostname)\r\nDATE=$(date \"+%Y-%m-%d %H:%M:%S\")\r\n\r\n# Nh·∫≠n tham s·ªë t·ª´ PortSentry\r\nTARGET_IP=$1\r\nTARGET_PORT=$2\r\n\r\n# ==========================================\r\n# N·ªòI DUNG EMAIL\r\n# ==========================================\r\nBODY=\"\r\nC·∫£nh b√°o b·∫£o m·∫≠t t·ª´ Server: $SERVER_NAME\r\n------------------------------------------------\r\nTh·ªùi gian ph√°t hi·ªán : $DATE\r\nH√†nh ƒë·ªông           : ƒê√£ ch·∫∑n (Blocked)\r\nIP K·∫ª t·∫•n c√¥ng      : $TARGET_IP\r\nC·ªïng b·ªã qu√©t        : $TARGET_PORT\r\n------------------------------------------------\r\nH·ªá th·ªëng ƒë√£ t·ª± ƒë·ªông th√™m rule v√†o iptables/hosts.deny.\r\nVui l√≤ng ki·ªÉm tra log t·∫°i /var/log/syslog ƒë·ªÉ bi·∫øt th√™m chi ti·∫øt.\r\n\"\r\n\r\n# ==========================================\r\n# G·ª¨I MAIL\r\n# ==========================================\r\necho \"$BODY\" | mail -s \"$SUBJECT\" \"$TO_EMAIL\"\r\n```\r\n\r\nC·∫•p quy·ªÅn th·ª±c thi cho script:\r\n\r\n```bash\r\nsudo chmod +x /usr/local/bin/portsentry_alert.sh\r\n```\r\n\r\n#### 3. T√≠ch h·ª£p Script v√†o PortSentry\r\nB√¢y gi·ªù ch√∫ng ta quay l·∫°i file c·∫•u h√¨nh c·ªßa PortSentry ƒë·ªÉ \"d·∫°y\" n√≥ c√°ch g·ªçi script n√†y khi ph√°t hi·ªán t·∫•n c√¥ng.\r\n\r\nM·ªü file config:\r\n\r\n```bash\r\nsudo nano /etc/portsentry/portsentry.conf\r\n```\r\n\r\nT√¨m d√≤ng `KILL_RUN_CMD`. D√≤ng n√†y cho ph√©p ch·∫°y m·ªôt l·ªánh ngo√†i (external command) tr∆∞·ªõc khi ch·∫∑n IP. S·ª≠a l·∫°i nh∆∞ sau:\r\n\r\n```bash\r\n# $TARGET$ l√† bi·∫øn ch·ª©a IP, $PORT$ l√† bi·∫øn ch·ª©a c·ªïng\r\nKILL_RUN_CMD=\"/usr/local/bin/portsentry_alert.sh $TARGET$ $PORT$\"\r\n```\r\n\r\nL∆∞u √Ω quan tr·ªçng: ƒê·∫£m b·∫£o bi·∫øn `BLOCK_UDP` v√† `BLOCK_TCP` ·ªü ch·∫ø ƒë·ªô 1 (Block) ho·∫∑c 2 (Run Command Only) th√¨ l·ªánh tr√™n m·ªõi ƒë∆∞·ª£c th·ª±c thi. T·ªët nh·∫•t l√† ƒë·ªÉ 1 ƒë·ªÉ v·ª´a ch·∫∑n v·ª´a g·ª≠i mail.\r\n\r\n#### 4. Kh·ªüi ƒë·ªông l·∫°i v√† Test\r\nRestart PortSentry:\r\n\r\n```bash\r\nsudo service portsentry restart\r\n```\r\n\r\nTh·ª≠ nghi·ªám (Attack Simulation): S·ª≠ d·ª•ng m√°y kh√°c (ho·∫∑c ƒëi·ªán tho·∫°i d√πng 4G - ƒë·ªÉ kh√°c IP m·∫°ng Lan) qu√©t th·ª≠:\r\n\r\n```bash\r\nnmap -p 1-100 <IP_Server_Cua_Ban>\r\n```\r\n\r\nN·∫øu th√†nh c√¥ng, b·∫°n s·∫Ω nh·∫≠n ƒë∆∞·ª£c m·ªôt email v·ªõi n·ªôi dung:\r\n`Subject: [ALERT] PortSentry Detected Attack! Body: C·∫£nh b√°o b·∫£o m·∫≠t... IP K·∫ª t·∫•n c√¥ng: 1.2.3.4.`"},{"title":"Road to DevOps #1 | Web server with Nginx and Log monitoring with GoAccess","slug":"road-to-devops-1","date":"2025-12-01","tags":["cybersecurity","personal","bilingual"],"body":"> *üáªüá≥ B·∫£n ti·∫øng Vi·ªát n·∫±m ·ªü ph√≠a d∆∞·ªõi b√†i vi·∫øt (Vietnamese version is available below).*\r\n\r\n\r\n\r\nAlo alo alo"},{"title":"A Friendly Guide to Setting Up a Fresh Ubuntu Server","slug":"ultimate-script-for-linuxsetup","date":"2025-12-01","tags":["ubuntu","vps","automation","docker","bilingual"],"body":"> *üáªüá≥ B·∫£n ti·∫øng Vi·ªát n·∫±m ·ªü ph√≠a d∆∞·ªõi b√†i vi·∫øt (Vietnamese version is available below).*\r\n\r\n---\r\n\r\n### The \"I Forgot to Install Git Again\" Solution\r\n\r\nHey everyone!\r\n\r\nWe‚Äôve all been there. You just spun up a fresh Ubuntu VPS or a new Virtual Machine. You‚Äôre excited to start deploying your project. You SSH in, ready to rock, you type `git clone...` and boom:\r\n\r\n> `bash: git: command not found`\r\n\r\n**Ugh. Frustrating, right?**\r\n\r\nThen you install Git. Then you try to unzip a file. Command not found. Then you realize `htop` isn't there. And worse, halfway through the night, you remember you completely forgot to configure the firewall, leaving your server wide open.\r\n\r\nHonestly, remembering every single utility and security package for every new server is a pain. It‚Äôs repetitive, and manual work leads to mistakes.\r\n\r\nThat‚Äôs why I decided to stop doing it manually and wrote a **\"One-Click\" script** to handle the boring stuff for me. I‚Äôm sharing it here so you can save time (and sanity) too.\r\n\r\n#### The Essentials: What We Are Installing\r\n\r\nBefore we get to the script, here is the \"Survival Kit\" I believe every modern Ubuntu server needs:\r\n\r\n1.  **The Toolbox (System Utilities)**\r\n    * **curl & wget:** For downloading stuff.\r\n    * **git:** Because how else are you getting your code?\r\n    * **vim / nano:** You need to edit config files somehow.\r\n    * **htop:** Because the default `top` is hard to read.\r\n    * **unzip & net-tools:** For managing archives and checking network stats (`ifconfig`).\r\n\r\n2.  **The Bodyguards (Security)**\r\n    * **ufw (Uncomplicated Firewall):** The easiest way to manage ports.\r\n    * **fail2ban:** A must-have. It watches for repeated failed login attempts (brute-force attacks) and automatically bans those IP addresses.\r\n\r\n3.  **The Engine Room (Web & Containers)**\r\n    * **nginx:** A lightweight, high-performance web server and reverse proxy.\r\n    * **docker & docker-compose:** It‚Äôs 2024 (almost 2025!). We shouldn't be installing messy dependencies directly on the OS anymore. Docker keeps everything clean and portable.\r\n\r\n#### The Script\r\n\r\nHere is the magic shell script. It automates everything: updates the system, installs the tools, configures the firewall to allow SSH (so you don't lock yourself out!), and sets up Docker.\r\n\r\n**How to use it:**\r\n\r\n1.  Create a file: `nano setup_server.sh`\r\n2.  Paste the code below.\r\n3.  Make it executable: `chmod +x setup_server.sh`\r\n4.  Run it: `sudo ./setup_server.sh`\r\n\r\n```bash\r\n#!/bin/bash\r\n\r\n# ==========================================\r\n# The Ultimate Ubuntu Server Setup Script\r\n# Author: Khang (Dulkanggg)\r\n# ==========================================\r\n\r\n# 1. Check for Root Privileges\r\nif [ \"$EUID\" -ne 0 ]; then \r\n  echo \"Please run this script as root (use sudo)\"\r\n  exit\r\nfi\r\n\r\necho \"--- STARTING SYSTEM UPDATE ---\"\r\napt update && apt upgrade -y\r\n\r\necho \"--- 1. INSTALLING ESSENTIAL UTILITIES ---\"\r\n# Installing curl, wget, git, htop, vim, unzip, net-tools, etc.\r\napt install -y curl wget git htop vim nano unzip net-tools software-properties-common ca-certificates gnupg lsb-release\r\n\r\necho \"--- 2. SETTING UP SECURITY (UFW & FAIL2BAN) ---\"\r\napt install -y ufw fail2ban\r\n\r\n# Configuring Basic Firewall Rules\r\n# IMPORTANT: We must allow SSH first to prevent locking ourselves out!\r\nufw default deny incoming\r\nufw default allow outgoing\r\nufw allow ssh\r\nufw allow 22/tcp\r\nufw allow 80/tcp\r\nufw allow 443/tcp\r\n\r\n# Enable UFW (Auto-confirm 'yes')\r\necho \"y\" | ufw enable\r\n\r\necho \"--- 3. INSTALLING NGINX (Web Server) ---\"\r\napt install -y nginx\r\nsystemctl start nginx\r\nsystemctl enable nginx\r\n\r\necho \"--- 4. INSTALLING DOCKER & DOCKER COMPOSE ---\"\r\n# Add Docker's official GPG key\r\nmkdir -p /etc/apt/keyrings\r\ncurl -fsSL [https://download.docker.com/linux/ubuntu/gpg](https://download.docker.com/linux/ubuntu/gpg) | gpg --dearmor -o /etc/apt/keyrings/docker.gpg\r\n\r\n# Set up the repository\r\necho \\\r\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] [https://download.docker.com/linux/ubuntu](https://download.docker.com/linux/ubuntu) \\\r\n  $(lsb_release -cs) stable\" | tee /etc/apt/sources.list.d/docker.list > /dev/null\r\n\r\napt update\r\napt install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin\r\n\r\n# Start Docker service\r\nsystemctl start docker\r\nsystemctl enable docker\r\n\r\n# Add current user to Docker group (so you don't need 'sudo' for docker commands)\r\n# Note: This checks for the user who ran the sudo command\r\nif [ -n \"$SUDO_USER\" ]; then\r\n    usermod -aG docker $SUDO_USER\r\n    echo \"User $SUDO_USER has been added to the docker group.\"\r\nfi\r\n\r\necho \"--- SYSTEM CLEANUP ---\"\r\napt autoremove -y\r\n\r\necho \"==========================================\"\r\necho \"   SETUP COMPLETE! READY TO ROCK.\"\r\necho \"==========================================\"\r\necho \"Versions Installed:\"\r\necho \"- Nginx: $(nginx -v 2>&1 | cut -d '/' -f 2)\"\r\necho \"- Docker: $(docker --version)\"\r\necho \"- UFW Status: $(ufw status | grep 'Status')\"\r\necho \"NOTE: Please logout and login again to apply Docker group permissions.\"\r\n```\r\n---\r\n\r\n### Wrapping Up\r\nAnd that‚Äôs it! In about 2 minutes, you go from a blank slate to a fully secured, Docker-ready server with all the creature comforts installed.\r\nHopefully, this script saves you some time on your next project. Let me know if you think I missed any essential tools in the comments below!\r\nHappy Coding!\r\n\r\n-------\r\n\r\n### H·ªôi ch·ª©ng \"Qu√™n c√†i Git\" v√† chi·∫øc Script c·ª©u c√°nh cho Ubuntu Server m·ªõi\r\n\r\nCh√†o m·ªçi ng∆∞·ªùi,\r\n\r\nCh·∫Øc h·∫≥n ai trong ch√∫ng ta c≈©ng t·ª´ng r∆°i v√†o c·∫£nh n√†y √≠t nh·∫•t m·ªôt (ho·∫∑c nhi·ªÅu) l·∫ßn. B·∫°n v·ª´a thu√™ ƒë∆∞·ª£c m·ªôt con VPS ngon ngh·∫ª, ho·∫∑c v·ª´a t·∫°o xong m·ªôt m√°y ·∫£o (VM) Ubuntu m·ªõi c·ª©ng ƒë·ªÉ l√†m lab. T√¢m tr·∫°ng ƒëang h·ª´ng h·ª±c kh√≠ th·∫ø, SSH v√†o server, g√µ l·ªánh ƒë·∫ßu ti√™n ƒë·ªãnh k√©o source v·ªÅ:\r\n\r\n`git clone ...`\r\n\r\nV√† h·ªá th·ªëng tr·∫£ v·ªÅ m·ªôt c√¢u xanh r·ªùn:\r\n\r\n> `bash: git: command not found`\r\n\r\n**C·ª•t h·ª©ng th·ª±c s·ª±!**\r\n\r\nTh·∫ø l√† l·∫°i ph·∫£i ng·ªìi `apt install git`. Xong xu√¥i, ƒë·ªãnh gi·∫£i n√©n c√°i file data th√¨ l·∫°i thi·∫øu `unzip`. Mu·ªën xem RAM, CPU th·∫ø n√†o cho tr·ª±c quan th√¨ nh·ªõ ra ch∆∞a c√†i `htop`. T·ªá h∆°n n·ªØa l√† h√¨ h·ª•c c·∫£ ƒë√™m deploy xong, s√°ng h√¥m sau m·ªõi t√° h·ªèa nh·∫≠n ra m√¨nh... qu√™n b·∫≠t t∆∞·ªùng l·ª≠a (Firewall), server \"tr·∫ßn tr·ª•i\" gi·ªØa internet.\r\n\r\nVi·ªác nh·ªõ h·∫øt t·∫•t c·∫£ nh·ªØng g√≥i ph·∫ßn m·ªÅm (packages) l·∫∑t v·∫∑t m·ªói khi c√†i l·∫°i m√°y th·ª±c s·ª± r·∫•t phi·ªÅn ph·ª©c v√† t·ªën th·ªùi gian. M√† l√†m th·ªß c√¥ng th√¨ ki·ªÉu g√¨ c≈©ng s√≥t.\r\n\r\nƒê√≥ l√† l√Ω do m√¨nh quy·∫øt ƒë·ªãnh kh√¥ng l√†m \"th·ªß c√¥ng m·ªπ ngh·ªá\" n·ªØa. Thay v√†o ƒë√≥, m√¨nh gom t·∫•t c·∫£ v√†o m·ªôt script duy nh·∫•t. Ch·ªâ c·∫ßn ch·∫°y m·ªôt d√≤ng l·ªánh, ƒëi pha c·ªëc c√† ph√™, quay l·∫°i l√† ƒë√£ c√≥ m·ªôt server \"full option\" ƒë·ªÉ s·∫µn s√†ng chi·∫øn ƒë·∫•u.\r\n\r\nH√¥m nay m√¨nh chia s·∫ª l·∫°i script n√†y cho anh em, hy v·ªçng gi√∫p m·ªçi ng∆∞·ªùi ti·∫øt ki·ªám th·ªùi gian (v√† ƒë·ª° b·ª±c m√¨nh).\r\n\r\n#### B·ªô \"ƒë·ªì ngh·ªÅ\" sinh t·ªìn (Survival Kit) g·ªìm nh·ªØng g√¨?\r\n\r\nTr∆∞·ªõc khi ƒëi v√†o script, ƒëi·ªÉm qua xem ch√∫ng ta s·∫Ω c√†i nh·ªØng g√¨ v√† t·∫°i sao n√≥ c·∫ßn thi·∫øt nh√©:\r\n\r\n**1. Nh√≥m C√¥ng c·ª• (System Utilities) - \"Thi·∫øu th√¨ r·∫•t b·ª±c\"**\r\n\r\n* **curl & wget:** ƒê·ªÉ t·∫£i file, test API.\r\n* **git:** Kh√¥ng c√≥ c√°i n√†y th√¨ l·∫•y code ki·ªÉu g√¨?\r\n* **vim / nano:** ƒê·ªÉ s·ª≠a file config nhanh g·ªçn.\r\n* **htop:** Xem t√†i nguy√™n m√°y (RAM/CPU) s∆∞·ªõng h∆°n l·ªánh `top` m·∫∑c ƒë·ªãnh nhi·ªÅu.\r\n* **unzip & net-tools:** Gi·∫£i n√©n file v√† check IP/Port (`ifconfig`, `netstat`).\r\n\r\n**2. Nh√≥m V·ªá sƒ© (Security)**\r\n\r\n* **ufw:** T∆∞·ªùng l·ª≠a ƒë∆°n gi·∫£n nh·∫•t qu·∫£ ƒë·∫•t. ƒê√≥ng h·∫øt c√°c c·ª≠a, ch·ªâ m·ªü c·ª≠a cho m√¨nh v√†o th√¥i.\r\n* **fail2ban:** Th·∫±ng n√†y c·ª±c hay. N√≥ s·∫Ω canh c·ª≠a SSH, ai g√µ sai m·∫≠t kh·∫©u nhi·ªÅu l·∫ßn l√† n√≥ ch·∫∑n (ban) IP ƒë√≥ lu√¥n. Ch·ªëng d√≤ m·∫≠t kh·∫©u c·ª±c t·ªët.\r\n\r\n**3. Nh√≥m V·∫≠n h√†nh (Engine Room)**\r\n\r\n* **nginx:** Web server nh·∫π, l√†m Reverse Proxy c·ª±c m∆∞·ª£t.\r\n* **docker & docker-compose:** Gi·ªù l√† th·ªùi ƒë·∫°i c·ªßa Container r·ªìi. C√†i database, redis hay app th√¨ c·ª© ƒë√≥ng v√†o Docker cho s·∫°ch m√°y, ƒë·ª° xung ƒë·ªôt th∆∞ vi·ªán.\r\n\r\n---\r\n\r\n#### Script \"One-Click\" (T·ª± ƒë·ªông h√≥a)\r\n\r\nƒê√¢y l√† ƒëo·∫°n script bash s·∫Ω l√†m h·∫øt m·ªçi vi·ªác t·ª´ A-Z: c·∫≠p nh·∫≠t h·ªá th·ªëng, c√†i tool, v√† quan tr·ªçng nh·∫•t l√† c·∫•u h√¨nh Firewall chu·∫©n ƒë·ªÉ b·∫°n kh√¥ng b·ªã... t·ª± nh·ªët m√¨nh ·ªü ngo√†i (do ch·∫∑n nh·∫ßm port SSH).\r\n\r\n**C√°ch d√πng:**\r\n\r\n1.  T·∫°o file m·ªõi: `nano setup_server.sh`\r\n2.  Copy n·ªôi dung b√™n d∆∞·ªõi d√°n v√†o.\r\n3.  C·∫•p quy·ªÅn ch·∫°y: `chmod +x setup_server.sh`\r\n4.  Ch·∫°y script (c·∫ßn quy·ªÅn root): `sudo ./setup_server.sh`\r\n\r\n```bash\r\n#!/bin/bash\r\n\r\n# ==========================================\r\n# Script C√†i ƒë·∫∑t Ubuntu Server \"Full Option\"\r\n# T√°c gi·∫£: Khang (Dulkanggg)\r\n# ==========================================\r\n\r\n# 1. Ki·ªÉm tra xem c√≥ ph·∫£i ƒëang ch·∫°y b·∫±ng quy·ªÅn Root kh√¥ng\r\nif [ \"$EUID\" -ne 0 ]; then \r\n  echo \"L·ªói: B·∫°n ph·∫£i ch·∫°y script n√†y b·∫±ng quy·ªÅn root (sudo)\"\r\n  exit\r\nfi\r\n\r\necho \"--- B·∫ÆT ƒê·∫¶U C·∫¨P NH·∫¨T H·ªÜ TH·ªêNG (Ng·ªìi ch·ªù x√≠u nh√©...) ---\"\r\napt update && apt upgrade -y\r\n\r\necho \"--- 1. C√ÄI ƒê·∫∂T C√îNG C·ª§ C∆† B·∫¢N (Utilities) ---\"\r\n# M·∫•y c√°i n√†y thi·∫øu l√† r·∫•t kh√≥ ch·ªãu\r\napt install -y curl wget git htop vim nano unzip net-tools software-properties-common ca-certificates gnupg lsb-release\r\n\r\necho \"--- 2. C√ÄI ƒê·∫∂T B·∫¢O M·∫¨T (UFW & FAIL2BAN) ---\"\r\napt install -y ufw fail2ban\r\n\r\n# C·∫•u h√¨nh T∆∞·ªùng l·ª≠a (Firewall)\r\n# QUAN TR·ªåNG: Ph·∫£i m·ªü port SSH (22) tr∆∞·ªõc, kh√¥ng l√† m·∫•t k·∫øt n·ªëi lu√¥n!\r\nufw default deny incoming  # Ch·∫∑n t·∫•t c·∫£ chi·ªÅu v√†o\r\nufw default allow outgoing # Cho ph√©p t·∫•t c·∫£ chi·ªÅu ra\r\nufw allow ssh              # M·ªü c·ªïng SSH\r\nufw allow 22/tcp\r\nufw allow 80/tcp           # M·ªü c·ªïng Web (HTTP)\r\nufw allow 443/tcp          # M·ªü c·ªïng Web (HTTPS)\r\n\r\n# K√≠ch ho·∫°t UFW (T·ª± ƒë·ªông ch·ªçn 'yes')\r\necho \"y\" | ufw enable\r\n\r\necho \"--- 3. C√ÄI ƒê·∫∂T NGINX (Web Server) ---\"\r\napt install -y nginx\r\nsystemctl start nginx\r\nsystemctl enable nginx\r\n\r\necho \"--- 4. C√ÄI ƒê·∫∂T DOCKER & DOCKER COMPOSE ---\"\r\n# Th√™m key ch√≠nh th·ª©c c·ªßa Docker\r\nmkdir -p /etc/apt/keyrings\r\ncurl -fsSL [https://download.docker.com/linux/ubuntu/gpg](https://download.docker.com/linux/ubuntu/gpg) | gpg --dearmor -o /etc/apt/keyrings/docker.gpg\r\n\r\n# Thi·∫øt l·∫≠p repository t·∫£i v·ªÅ\r\necho \\\r\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] [https://download.docker.com/linux/ubuntu](https://download.docker.com/linux/ubuntu) \\\r\n  $(lsb_release -cs) stable\" | tee /etc/apt/sources.list.d/docker.list > /dev/null\r\n\r\napt update\r\napt install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin\r\n\r\n# B·∫≠t Docker service\r\nsystemctl start docker\r\nsystemctl enable docker\r\n\r\n# Th√™m user hi·ªán t·∫°i v√†o nh√≥m docker (ƒë·ªÉ g√µ l·ªánh docker kh√¥ng c·∫ßn th√™m sudo)\r\nif [ -n \"$SUDO_USER\" ]; then\r\n    usermod -aG docker $SUDO_USER\r\n    echo \"ƒê√£ th√™m user $SUDO_USER v√†o nh√≥m docker.\"\r\nfi\r\n\r\necho \"--- D·ªåN D·∫∏P R√ÅC H·ªÜ TH·ªêNG ---\"\r\napt autoremove -y\r\n\r\necho \"==========================================\"\r\necho \"   C√ÄI ƒê·∫∂T HO√ÄN T·∫§T! CHI·∫æN TH√îI.\"\r\necho \"==========================================\"\r\necho \"C√°c phi√™n b·∫£n ƒë√£ c√†i:\"\r\necho \"- Nginx: $(nginx -v 2>&1 | cut -d '/' -f 2)\"\r\necho \"- Docker: $(docker --version)\"\r\necho \"- T∆∞·ªùng l·ª≠a (UFW): $(ufw status | grep 'Status')\"\r\necho \"L∆ØU √ù: H√£y Logout v√† Login l·∫°i ƒë·ªÉ √°p d·ª•ng quy·ªÅn Docker nh√©!\"\r\n```\r\n---\r\n### L·ªùi k·∫øt\r\nV·∫≠y l√† xong! Ch·ªâ m·∫•t t·∫ßm 2-3 ph√∫t ch·∫°y script, b·∫°n ƒë√£ bi·∫øn m·ªôt con server \"tr·∫Øng tr∆°n\" th√†nh m·ªôt m√¥i tr∆∞·ªùng ƒë·∫ßy ƒë·ªß ti·ªán nghi, b·∫£o m·∫≠t c∆° b·∫£n t·ªët v√† s·∫µn s√†ng ch·∫°y Docker.\r\n\r\nHy v·ªçng c√°i script nh·ªè n√†y gi√∫p √≠ch cho anh em trong qu√° tr√¨nh \"v·ªçc v·∫°ch\" server. N·∫øu anh em th·∫•y c√≤n thi·∫øu m√≥n \"ƒë·ªì ch∆°i\" n√†o quan tr·ªçng n·ªØa th√¨ comment b√™n d∆∞·ªõi ƒë·ªÉ m√¨nh b·ªï sung v√†o script nh√©!"},{"title":"Hello World! Welcome to Dulkanggg's Corner","slug":"welcome-blog","date":"2025-12-01","tags":["intro","cybersecurity","personal","bilingual"],"body":"> *üáªüá≥ B·∫£n ti·∫øng Vi·ªát n·∫±m ·ªü ph√≠a d∆∞·ªõi b√†i vi·∫øt (Vietnamese version is available below).*\r\n\r\n---\r\n\r\n### Hello World!\r\n\r\nHi everyone, I'm **Khang**.\r\n\r\nI am a Cybersecurity fresher on a journey to become an IT Security Officer, and eventually a Cyber Security Consultant (ambitious, I know!). Currently, I act as a penetration tester, a red teamer, a bounty hunter, and a self-proclaimed ethical hacker. I am a big fan of new technologies, but generally, I'm just an ordinary man.\r\n\r\nWelcome to **Dulkanggg's Corner**, my personal space on the internet.\r\n\r\n#### What is this place?\r\n\r\nThis website is where I archive interesting news, articles, tutorials, and links that I find useful or intriguing. The content here mainly revolves around:\r\n\r\n* **Cybersecurity:** Write-ups, CTF solutions, and security concepts.\r\n* **IT & Tech:** Networking, Linux, and setting up local environments.\r\n* **My Projects:** Updates on things I'm building (like e-commerce platforms or security tools).\r\n\r\nI hope you will find useful information on my website.\r\n\r\nFeel free to connect with me on social media or drop me an email. I usually respond within a few days.\r\n\r\n* [GitHub](https://github.com/khanchannn)\r\n* [Facebook](https://www.facebook.com/dulkanggg1504/)\r\n* [Email](mailto:dulkanggg1504@gmail.com)\r\n\r\n---\r\n\r\n### Xin ch√†o!\r\n\r\nCh√†o m·ªçi ng∆∞·ªùi, m√¨nh l√† **Khang**.\r\n\r\nHi·ªán t·∫°i, m√¨nh l√† m·ªôt ng∆∞·ªùi m·ªõi (fresher) trong lƒ©nh v·ª±c An ninh m·∫°ng. M·ª•c ti√™u c·ªßa m√¨nh l√† tr·ªü th√†nh m·ªôt Chuy√™n vi√™n An ninh CNTT v√† sau ƒë√≥ l√† Chuy√™n gia T∆∞ v·∫•n An ninh m·∫°ng. Hi·ªán t·∫°i, m√¨nh ƒëang t√¨m hi·ªÉu v√† th·ª±c h√†nh c√°c vai tr√≤ nh∆∞ penetration tester, red teamer, sƒÉn l·ªói nh·∫≠n th∆∞·ªüng (bounty hunter), v√† l√† m·ªôt ethical hacker t·ª± phong. M√¨nh r·∫•t th√≠ch t√¨m hi·ªÉu c√°c c√¥ng ngh·ªá m·ªõi, nh∆∞ng nh√¨n chung, m√¨nh c≈©ng ch·ªâ l√† m·ªôt ng∆∞·ªùi b√¨nh th∆∞·ªùng nh∆∞ bao ng∆∞·ªùi kh√°c.\r\n\r\nCh√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi **Dulkanggg's Corner**, g√≥c nh·ªè c·ªßa m√¨nh tr√™n Internet.\r\n\r\n#### Trang web n√†y d√πng ƒë·ªÉ l√†m g√¨?\r\n\r\nƒê√¢y l√† n∆°i m√¨nh l∆∞u tr·ªØ v√† chia s·∫ª nh·ªØng tin t·ª©c th√∫ v·ªã, c√°c b√†i vi·∫øt, h∆∞·ªõng d·∫´n (tutorial) v√† c√°c li√™n k·∫øt m√† m√¨nh th·∫•y h·ªØu √≠ch. N·ªôi dung ·ªü ƒë√¢y ch·ªß y·∫øu xoay quanh:\r\n\r\n* **An ninh m·∫°ng (Cybersecurity):** C√°c b√†i vi·∫øt chia s·∫ª ki·∫øn th·ª©c, gi·∫£i c√°c b√†i t·∫≠p CTF, v√† c√°c kh√°i ni·ªám b·∫£o m·∫≠t.\r\n* **CNTT & C√¥ng ngh·ªá:** M·∫°ng m√°y t√≠nh, Linux, v√† c√°ch thi·∫øt l·∫≠p c√°c m√¥i tr∆∞·ªùng server/lab c·ª•c b·ªô.\r\n* **D·ª± √°n c√° nh√¢n:** C·∫≠p nh·∫≠t v·ªÅ nh·ªØng th·ª© m√¨nh ƒëang x√¢y d·ª±ng (nh∆∞ c√°c n·ªÅn t·∫£ng web ho·∫∑c c√¥ng c·ª• b·∫£o m·∫≠t).\r\n\r\nM√¨nh hy v·ªçng b·∫°n s·∫Ω t√¨m th·∫•y nh·ªØng th√¥ng tin h·ªØu √≠ch t·∫°i ƒë√¢y.\r\n\r\nƒê·ª´ng ng·∫ßn ng·∫°i k·∫øt n·ªëi v·ªõi m√¨nh qua m·∫°ng x√£ h·ªôi ho·∫∑c g·ª≠i email cho m√¨nh. M√¨nh th∆∞·ªùng ph·∫£n h·ªìi trong v√≤ng v√†i ng√†y.\r\n\r\n* [GitHub](https://github.com/khanchannn)\r\n* [Facebook](https://www.facebook.com/dulkanggg1504/)\r\n* [Email](mailto:dulkanggg1504@gmail.com)"}]